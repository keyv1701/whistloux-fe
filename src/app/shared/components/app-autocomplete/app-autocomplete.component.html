<div class="relative">
  <input
    [id]="id"
    type="text"
    [formControl]="inputControl"
    [placeholder]="placeholder"
    (input)="onInput($event)"
    (focus)="onFocus()"
    (blur)="onBlur()"
    class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
    [class.bg-gray-100]="disabled"
    [class.cursor-not-allowed]="disabled"
    [class.opacity-70]="disabled"
    [attr.disabled]="disabled ? true : null"
  />

  <div
    *ngIf="showDropdown && !disabled"
    class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"
  >
    <div *ngIf="loading" class="p-2 text-center text-gray-500">Chargement...</div>

    <div *ngIf="!loading && filteredItems.length === 0" class="p-2 text-center text-gray-500">
      {{ emptyMessage }}
    </div>

    <div
      *ngFor="let item of filteredItems"
      (mousedown)="selectItem(item)"
      class="p-2 hover:bg-blue-100 cursor-pointer transition-colors"
    >
      {{ displayFn(item) }}
    </div>
  </div>
</div>
